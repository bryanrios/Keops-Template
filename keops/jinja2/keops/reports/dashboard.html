{% extends "/keops/web/index.html" %}
{% block app_content %}

  <div ng-controller="BasicController">

    <form id="report-form" action="/web/reports/report/" method="get">
      <div class="col-sm-12">
        <table class="col-sm-12" style="margin-top: 20px;">
          <tr>
            <td>
              <label>Template</label>
              <select name="file" class="form-control">
                {% for rep in reports %}
                  <option value="{{ rep.filename }}">{{ rep.name }}</option>
                {% endfor %}
              </select>
            </td>
            <td style="width: 1px;vertical-align: bottom">
              <button class="btn btn-default" type="submit"><i class="fa fa-folder-open fa-fw"></i>
                ${Katrid.i18n.gettext('Load')}
              </button>
            </td>
          </tr>
          <tr ng-show="false">
            <td colspan="2" style="padding-top: 8px;">
              <label>${Katrid.i18n.gettext('User Reports')}</label>
              <select name="file" class="form-control">
                {% for rep in reports %}
                  <option value="{{ rep.filename }}">{{ rep.name }}</option>
                {% endfor %}
              </select>
            </td>
          </tr>
        </table>
      </div>

      {% include "keops/reports/dialogs/params.html" %}
      <hr>
        <table class="col-sm-12">
          <tr>
            <td class="col-sm-4">
              <select class="form-control">
                <option>--- FILTROS ---</option>
                {% for field in fields %}
                  <option value="{{ field.name }}">{{ field.label }}</option>
                {% endfor %}
                {% for rep in reports %}
                  <option value="{{ rep.filename }}">{{ rep.name }}</option>
                {% endfor %}
              </select>
            </td>
            <td class="col-sm-8">
              <button class="btn btn-default"><i class="fa fa-plus fa-fw"></i> ${Katrid.i18n.gettext('Add Parameter')}
              </button>
            </td>
          </tr>
        </table>
    </form>


  </div>

{% endblock %}
{% block page_loaded %}
  <script>
    $(document).ready(function () {
      var cont = $('#report-params');
      var scope = angular.element(cont).scope();
      {% if report %}
      var report = {{ report|safe }};
      report = new Katrid.Reports.Report(report, scope);
      var el = report.render(cont, scope);
      {% endif %}
    });
  </script>
{% endblock %}